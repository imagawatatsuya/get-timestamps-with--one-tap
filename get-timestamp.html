<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <!-- ★ Viewport設定でデバイス幅に合わせ、初期拡大率を1に -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>日時をクリップボードにコピー</title>
    <style>
        /* ★ 基本的なリセットと共通スタイル */
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif; /* OS標準フォント優先 */
            margin: 0; /* 外側の余白をなくす */
            padding: 20px; /* 内側の余白を確保 */
            line-height: 1.6; /* 行間を読みやすく */
            background-color: #f8f9fa; /* 背景色を少しつける */
            color: #333; /* 基本の文字色 */
            -webkit-font-smoothing: antialiased; /* iOSでのフォント表示を滑らかに */
            -moz-osx-font-smoothing: grayscale; /* Firefoxでのフォント表示を滑らかに */
        }

        /* ★ コンテンツ全体のコンテナ (中央寄せや最大幅設定に便利) */
        .container {
            max-width: 600px; /* PCでも見やすいように最大幅を設定 */
            margin: 0 auto; /* 中央寄せ */
            background-color: #fff; /* コンテナ背景色 */
            padding: 25px;
            border-radius: 8px; /* 角を丸める */
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1); /* 軽い影 */
        }

        h1 {
            font-size: 1.8em; /* 見出しを少し大きく */
            margin-bottom: 15px;
            text-align: center; /* 中央寄せ */
            color: #212529;
        }

        p {
            font-size: 1em; /* 本文の文字サイズ */
            margin-bottom: 20px;
            text-align: center;
            color: #555;
        }

        /* ★ 日時表示エリア */
        #output {
            font-family: "SF Mono", "Consolas", "Menlo", monospace; /* 等幅フォント */
            font-size: 1.1em; /* 少し大きく */
            background-color: #e9ecef; /* 背景色 */
            padding: 15px; /* 内側の余白 */
            border-radius: 6px; /* 角を丸める */
            margin-bottom: 25px; /* ボタンとの間隔 */
            text-align: center; /* 中央寄せ */
            word-wrap: break-word; /* 長い場合に折り返す */
            color: #000; /* 文字色を黒に */
        }

        /* ★ コピーボタン */
        #copyButton {
            display: block; /* ブロック要素にして幅を指定可能に */
            width: 100%; /* 幅を100%に */
            padding: 15px 20px; /* 上下のパディングを増やしてタップしやすく */
            font-size: 1.1em; /* 文字を少し大きく */
            font-weight: bold; /* 太字に */
            color: #fff; /* 文字色を白に */
            background-color: #007bff; /* ボタンの色 (青系) */
            border: none; /* 枠線を消す */
            border-radius: 6px; /* 角を丸める */
            cursor: pointer; /* カーソルをポインターに */
            transition: background-color 0.2s ease, transform 0.1s ease; /* ホバーやアクティブ時の変化を滑らかに */
            -webkit-appearance: none; /* iOSのデフォルトスタイルを無効化 */
            appearance: none;
        }

        /* ボタンのホバー時 (PC向け) */
        #copyButton:hover {
            background-color: #0056b3;
        }

        /* ★ ボタンのタップ/クリック時 */
        #copyButton:active {
            background-color: #004085;
            transform: scale(0.98); /* 少し縮小する効果 */
        }

        /* ★ メッセージ表示エリア */
        #message, #error {
            margin-top: 15px;
            font-size: 0.95em;
            font-weight: bold;
            text-align: center;
            min-height: 1.2em; /* 高さを確保してレイアウトが崩れないように */
        }

        #message {
            color: #28a745; /* 成功メッセージ (緑系) */
        }

        #error {
            color: #dc3545; /* エラーメッセージ (赤系) */
        }

    </style>
</head>
<body>

    <!-- ★ コンテナで全体を囲む -->
    <div class="container">
        <h1>日時コピー</h1> <!-- タイトルをシンプルに -->
        <p>ボタンを押すと現在日時をコピーします。</p>

        <!-- 日時表示エリア -->
        <div id="output">（ここに日時が表示されます）</div>

        <!-- コピーボタン -->
        <button id="copyButton">日時をコピー</button>

        <!-- メッセージ表示用 -->
        <div id="message"></div>
        <div id="error"></div>
    </div>

    <script>
        const outputElement = document.getElementById('output');
        const copyButton = document.getElementById('copyButton');
        const messageElement = document.getElementById('message');
        const errorElement = document.getElementById('error');

        // ゼロ埋め関数
        const padZero = (num) => String(num).padStart(2, '0');

        // 日時を生成して表示する関数
        function generateAndDisplayDateTime() {
            const now = new Date();
            const year = now.getFullYear();
            const month = now.getMonth() + 1;
            const day = now.getDate();
            const hours = now.getHours();
            const minutes = now.getMinutes();
            const seconds = now.getSeconds();
            const dayIndex = now.getDay();
            const weekDaysShort = ["日", "月", "火", "水", "木", "金", "土"];
            const dayOfWeekShort = weekDaysShort[dayIndex];

            const formattedDateTime = `${year}/${padZero(month)}/${padZero(day)}(${dayOfWeekShort}) ${padZero(hours)}:${padZero(minutes)}:${padZero(seconds)}`;

            outputElement.textContent = formattedDateTime; // 画面にも表示
            return formattedDateTime; // 生成した日時文字列を返す
        }

        // ボタンがクリック/タップされたときの処理
        copyButton.addEventListener('click', async () => {
            messageElement.textContent = ''; // メッセージをクリア
            errorElement.textContent = '';   // エラーメッセージをクリア
            const textToCopy = generateAndDisplayDateTime(); // 最新の日時を生成

            // Clipboard API が使えるかチェック
            if (!navigator.clipboard) {
                errorElement.textContent = 'お使いのブラウザはクリップボード機能に対応していません。';
                 // 古いブラウザ向けのフォールバック処理はコメントアウト（必要なら有効化）
                /*
                try {
                    const textArea = document.createElement('textarea');
                    textArea.style.position = 'fixed'; // 画面外に配置
                    textArea.style.top = '-9999px';
                    textArea.style.left = '-9999px';
                    textArea.value = textToCopy;
                    document.body.appendChild(textArea);
                    textArea.focus();
                    textArea.select();
                    document.execCommand('copy');
                    document.body.removeChild(textArea);
                    messageElement.textContent = 'コピーしました！';
                } catch (err) {
                    console.error('execCommandでのコピーに失敗:', err);
                    errorElement.textContent = 'コピーに失敗しました。';
                }
                */
                return;
            }

            // Clipboard API を使ってコピー
            try {
                await navigator.clipboard.writeText(textToCopy);
                messageElement.textContent = 'コピーしました！'; // メッセージを短く
                console.log('日時をクリップボードにコピーしました:', textToCopy);

                // ★ コピー成功後に一時的にボタンのテキストを変更（任意）
                const originalButtonText = copyButton.textContent;
                copyButton.textContent = 'コピー完了✅';
                copyButton.style.backgroundColor = '#28a745'; // 一時的に緑色に
                setTimeout(() => {
                    copyButton.textContent = originalButtonText;
                    copyButton.style.backgroundColor = '#007bff'; // 元の色に戻す
                    messageElement.textContent = ''; // メッセージも消す
                }, 1500); // 1.5秒後に元に戻す

            } catch (err) {
                console.error('クリップボードへのコピーに失敗しました:', err);
                errorElement.textContent = 'コピーに失敗しました。権限を確認してください。';
            }
        });

        // ページ読み込み時に初回の日時を表示
        generateAndDisplayDateTime();

        // 1秒ごとに日時表示を更新 (任意)
        // setInterval(generateAndDisplayDateTime, 1000);
        // ※ 頻繁に更新する必要がなければ、初回表示だけでもOK

    </script>

</body>
</html>